<script name="rbac/role/row" pi="a/Source" type="text/x-dot">
<tr>
<td>{{= it.name }}</td>
<td>{{= it.prefix }}</td>
<td><a pi="a/Pager/Dialog" href="#" id="{{= it.id }}" msg="tbody@reload" prefix="rbac/role" data-id="{{= it.id }}">Править</a></td>
<td><a href="#rbac/rule?role_id={{! it.id }}">Правила</a></td>
<td><a href="#rbac/option?role_id={{! it.id }}">Параметры</a></td>
</tr>
</script>

<script name="rbac/role/edit" pi="a/Source" type="text/x-dot">
<div title="Роль" data-width="500">
   <form method="POST" class="form-horizontal">

   <div class="control-group">
      <div pi="a/Template" name="h-input" data-fname="Название" data-name="name" data-value="{{= it.o.name }}"></div>
      <div pi="a/Template" name="h-input" data-fname="Префикс" data-name="prefix" data-value="{{= it.o.prefix }}"></div>
      <input class="form" type="hidden" name="id" value="{{= it.o.id }}">
   </div>

   <button pi="a/Form" el=".form" class="btn" msg="#{{= it.o.id }}[prefix='rbac/role']@save">Сохранить</button>

   {{? it.o.id }}
      <button pi="a/Button" class="btn" msg="#{{= it.o.id }}[prefix='rbac/role']@delete" data-id="{{= it.o.id }}">Удалить</button>
   {{?}}

   </form>
</div>
</script>


<table class="table table-striped">
<caption pi="a/Template" replace name="table/caption" data-name="Роли" data-prefix="rbac/role"></caption>
<thead>
<tr>
   <th>Название</th>
   <th>Префикс</th>
   <th></th>
</tr>
</thead>
<tbody pi="a/Pager" uri="/rbac/role/table" row="rbac/role/row" msg=".pagination@pager/load" filter=".filter">
</tbody>
</table>
