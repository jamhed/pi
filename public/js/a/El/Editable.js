// Generated by CoffeeScript 1.6.2
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(["a/El", "lib/URI/URI"], function(aEl, URI) {
  var aElEditable;
  return aElEditable = (function(_super) {
    __extends(aElEditable, _super);

    aElEditable.prototype.attr = function() {
      return aElEditable.__super__.attr.apply(this, arguments).concat(["cms"]);
    };

    function aElEditable() {
      var _this = this;
      aElEditable.__super__.constructor.apply(this, arguments);
      this.sub("edit", function() {
        return _this.edit();
      });
      this.sub("save", function() {
        return _this.save();
      });
      this.sub("cancel", function() {
        return _this.cancel();
      });
    }

    aElEditable.prototype.timestamp = function() {
      return new Date().getTime();
    };

    aElEditable.prototype.cancel = function() {
      return this.set(this.text);
    };

    aElEditable.prototype.save = function() {
      var _this = this;
      return $.post(this.a.cms, {
        name: this.uri.fragment(),
        content: this.get()
      }, function(r) {
        _this.set(r.content);
        return _this.uri.setQuery("rev", _this.timestamp());
      });
    };

    aElEditable.prototype.get = function() {
      return this.e.html();
    };

    aElEditable.prototype.edit = function() {};

    return aElEditable;

  })(aEl);
});
